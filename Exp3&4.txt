Experiencia 3 - Configuração de um router em Linux

Esta experiencia tinha como objetivo configurar o tux4 como um router, de modo a permitir a comunicação entre a duas VLANs.
Para tal, foi necessário criar uma interface ethernet1 no tux4, com o IP dentro da mesma gama que o tux2, e adicionar a sua porta do switch à VLAN1.
De seguida, cria-se rotas, de modo a poder connetar o tux1 com a VLAN1, e o tux2 com a VLAN0. No tux1, faz-se 'route add -net 172.16.y1.0/24 gw 172.16.y0.254'. Este cria uma rota entre o tux1 e a VLAN1, usando o eth0 do tux4 como gateway. Fez-se o mesmo no tux2, exceto com o comando 'route add -net 172.16.y0.0/24 gw 172.16.y1.253'.
Finalmente, é possível fazer ping entre os tux1 e tux2, usando o tux4 como router.
Com uma análise aos logs, percebe-se que, através de um ping to tux1 para o tux2, o pacote ICMP tem o endereço MAC do tux4 como endereço de destino. Na resposta do tux2, vê-se que o endereço de origem do pacote é o endereço MAC do tux4. Concluíndo, então, que o pacote passa pelo tux4 com sucesso, como era esperado.


Experiencia 4 - Configuração de um router comercial com NAT

O objetivo desta experiência foi configurar um router comercial, com NAT, que esteja ligado à VLAN1. Este router possibilita a comunicação entre os computadores da rede como redes externas.
Para tal, foi preciso criar duas interfaces gigabitethernet (0/0 e 0/1). A interface interna 0/0 tem um IP da mesma gama que o tux2, neste caso 172.16.y1.254. A porta desta interface é adicionada à switch. A interface externa 0/1 é configurada com o IP 172.16.1.y9, de modo a estar ligado ao router do laboratorio. É usado o comando 'no shutdown' durante a configuração de modo a estas se manterem intactas caso o router seja desligado.
De seguida, implementa-se o NAT, usando os comandos de nat pool e uma accesslist. Esta accesslist deve ser dada permissões para cada sub-rede.
O tux4 é definido como default gateway do tux1, e o router como default gateway do tux2 e 4. Deste modo, os pacotes vindos do tux1 são reencaminhados para o router através do tux4.